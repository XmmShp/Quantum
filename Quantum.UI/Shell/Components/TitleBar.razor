@using ElectronNET.API

<div class="title-bar">
    <div class="drag-area">
        <span class="app-title">Quantum</span>
    </div>
    <div class="window-controls">
        <button class="control-button" @onclick="MinimizeWindow">
            <Icon Type="minus" Theme="IconThemeType.Outline"/>
        </button>
        <button class="control-button" @onclick="MaximizeWindow">
            <Icon Type="border" Theme="IconThemeType.Outline"/>
        </button>
        <button class="control-button close" @onclick="CloseWindow">
            <Icon Type="close" Theme="IconThemeType.Outline"/>
        </button>
    </div>
</div>

<style>
    .title-bar {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;
        -webkit-app-region: drag;
        user-select: none;
        width: 100%;
    }

    .drag-area {
        flex: 1;
        display: flex;
        align-items: center;
        padding: 0 12px;
        height: 100%;
    }

    .app-title {
        color: #fff;
        font-size: 12px;
        opacity: 0.65;
    }

    .window-controls {
        display: flex;
        height: 100%;
        -webkit-app-region: no-drag;
    }

    .control-button {
        width: 45px;
        height: 100%;
        border: none;
        background: transparent;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s;
        opacity: 0.45;
    }

    .control-button:hover {
        background: rgba(255,255,255,0.1);
        opacity: 0.85;
    }

    .control-button.close:hover {
        background: #e81123;
        opacity: 1;
    }

    :global(.control-button .anticon) {
        font-size: 10px;
    }
</style>

@code {
    private void MinimizeWindow()
    {
        Electron.WindowManager.BrowserWindows.First().Minimize();
    }

    private async Task MaximizeWindow()
    {
        var window = Electron.WindowManager.BrowserWindows.First();
        if (await window.IsMaximizedAsync())
        {
            window.Unmaximize();
        }
        else
        {
            window.Maximize();
        }
    }

    private void CloseWindow()
    {
        Electron.WindowManager.BrowserWindows.First().Close();
    }
}
